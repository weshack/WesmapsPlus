// Generated by CoffeeScript 1.6.2
var Schedule;

window.theData = {
  'COMP112-02': {
    'Tuesday': [[9, 10.33]],
    'Thursday': [[9, 10.33]]
  },
  'COMP212-02': {
    'Monday': [[14.66, 16]],
    'Friday': [[14.66, 16]]
  }
};

Schedule = (function() {
  Schedule.earliest = 8;

  Schedule.latest = 24;

  function Schedule(courseData, $wrapper) {
    var $newDay, d, _i, _len, _ref;

    this.courseData = courseData;
    this.$wrapper = $wrapper;
    this.days = {};
    _ref = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      d = _ref[_i];
      $newDay = $('<div class="day day-' + d + '"><div class="relative"></div></div>');
      this.$wrapper.append($newDay);
      this.days[d] = $newDay.children('.relative');
    }
    this.draw();
  }

  Schedule.prototype.draw = function() {
    var $thisMtg, course, d, day, days, earliest, height, latest, t, times, top, _fn, _i, _len, _ref, _ref1, _results;

    _ref = this.days;
    _fn = function(sup) {
      return d.html('');
    };
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      d = _ref[_i];
      _fn(sup);
    }
    _ref1 = this.courseData;
    _results = [];
    for (course in _ref1) {
      days = _ref1[course];
      _results.push((function() {
        var _results1;

        _results1 = [];
        for (day in days) {
          times = days[day];
          _results1.push((function() {
            var _j, _len1, _results2;

            _results2 = [];
            for (_j = 0, _len1 = times.length; _j < _len1; _j++) {
              t = times[_j];
              earliest = Schedule.earliest;
              latest = Schedule.latest;
              top = (t[0] - earliest) * 100 / (latest - earliest);
              height = (t[1] - t[0]) * 100 / (latest - earliest);
              $thisMtg = $('<div class="mtg"></div>');
              $thisMtg.css('top', top + '%').css('height', height + '%');
              _results2.push(this.days[day].children('.relative').append($thisMtg));
            }
            return _results2;
          }).call(this));
        }
        return _results1;
      }).call(this));
    }
    return _results;
  };

  return Schedule;

})();
